<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myles Nutrition Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              'brand-bg': '#0f172a',
              'brand-primary': '#3b82f6',
              'brand-secondary': '#f59e0b',
              'brand-success': '#10b981',
              'brand-accent': '#8b5cf6',
              'brand-text': '#f1f5f9',
              'brand-card': '#1e293b',
            }
          }
        }
      }
    </script>
    <style>
      .chart-container {
        position: relative;
        width: 100%;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
        height: 280px;
        max-height: 300px;
      }
      @media (min-width: 640px) {
        .chart-container {
          height: 320px;
          max-height: 350px;
        }
      }
      .chart-container-bar {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        height: 300px;
        max-height: 350px;
      }
      @media (min-width: 640px) {
        .chart-container-bar {
          height: 350px;
          max-height: 400px;
        }
      }
      /* Custom scrollbar for output area */
      .ai-response::-webkit-scrollbar {
        width: 8px;
      }
      .ai-response::-webkit-scrollbar-track {
        background: #1e293b; 
      }
      .ai-response::-webkit-scrollbar-thumb {
        background: #3b82f6; 
        border-radius: 4px;
      }
      .ai-response::-webkit-scrollbar-thumb:hover {
        background: #2563eb; 
      }
    </style>
</head>
<body class="bg-brand-bg text-brand-text font-sans antialiased">

    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-10">

        <header class="mb-10 flex flex-col md:flex-row justify-between items-center border-b border-gray-700 pb-6">
            <div>
                <h1 class="text-4xl md:text-5xl font-black text-brand-primary mb-2">MYLES NUTRITION</h1>
                <p class="text-xl text-gray-400">High-Performance Diet Architecture</p>
            </div>
            <div class="mt-4 md:mt-0 bg-brand-card px-6 py-3 rounded-lg border border-brand-primary/30">
                <span class="text-brand-secondary font-bold text-lg">Goal:</span>
                <span class="text-white ml-2">Fuel Intense Performance (Wed/Fri)</span>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">

            <!-- Logic Coach Section (Replaced AI) -->
            <section class="md:col-span-2 bg-gradient-to-r from-brand-card to-slate-800 rounded-2xl shadow-lg p-6 lg:p-8 border border-brand-primary/50 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-5 text-9xl">‚ö°</div>
                
                <h2 class="text-2xl font-bold text-white mb-2 flex items-center">
                    <span class="text-2xl mr-2">‚ö°</span> Smart Logic Coach
                </h2>
                <p class="text-gray-400 mb-6">Instant diet tools. No API key required.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Input Tools -->
                    <div class="space-y-4">
                        
                        <!-- Tool 1: Meal Swapper -->
                        <div class="bg-brand-bg/50 p-4 rounded-xl border border-gray-700">
                            <h3 class="font-bold text-brand-secondary mb-2">üîÑ Smart Meal Swapper</h3>
                            <p class="text-xs text-gray-400 mb-2">Don't have an ingredient? Find a macro-match.</p>
                            <div class="flex gap-2">
                                <input type="text" id="swapInput" placeholder="e.g. Chicken, Rice, Oats" class="w-full bg-brand-bg border border-gray-600 rounded px-3 py-2 text-sm focus:border-brand-primary focus:outline-none text-white">
                                <button onclick="runOfflineSwap()" class="bg-brand-secondary hover:bg-yellow-600 text-black font-bold px-4 py-2 rounded text-sm transition whitespace-nowrap">‚ú® Swap It</button>
                            </div>
                        </div>

                        <!-- Tool 2: Hype Generator -->
                        <div class="bg-brand-bg/50 p-4 rounded-xl border border-gray-700 flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-brand-primary mb-1">üî• Match Day Hype</h3>
                                <p class="text-xs text-gray-400">Get a random motivational quote.</p>
                            </div>
                            <button onclick="runOfflineHype()" class="bg-brand-primary hover:bg-blue-700 text-white font-bold px-4 py-2 rounded text-sm transition">‚ú® Hype Me Up</button>
                        </div>

                        <!-- Tool 3: Recipe Gen -->
                         <div class="bg-brand-bg/50 p-4 rounded-xl border border-gray-700">
                            <h3 class="font-bold text-brand-success mb-2">üç≥ Quick Recipe Builder</h3>
                            <p class="text-xs text-gray-400 mb-2">Got random ingredients? Get a high-cal idea.</p>
                            <div class="flex gap-2">
                                <input type="text" id="recipeInput" placeholder="e.g. Eggs, Spinach" class="w-full bg-brand-bg border border-gray-600 rounded px-3 py-2 text-sm focus:border-brand-primary focus:outline-none text-white">
                                <button onclick="runOfflineRecipe()" class="bg-brand-success hover:bg-green-700 text-white font-bold px-4 py-2 rounded text-sm transition whitespace-nowrap">‚ú® Build</button>
                            </div>
                        </div>

                    </div>

                    <!-- Output Area -->
                    <div class="bg-brand-bg border border-gray-700 rounded-xl p-4 h-full min-h-[250px] relative flex flex-col">
                        <div class="flex justify-between items-center mb-2 border-b border-gray-800 pb-2">
                            <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">Coach Output</span>
                        </div>
                        <div id="aiOutput" class="ai-response text-sm text-gray-300 leading-relaxed overflow-y-auto flex-grow prose prose-invert max-w-none">
                            <p class="text-gray-600 italic">Select a tool on the left. I'm ready to help you hit 4000kcal.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Targets Section -->
            <section class="md:col-span-2 bg-brand-card rounded-2xl shadow-lg p-6 lg:p-8 border border-gray-700">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <span class="bg-brand-primary w-2 h-8 mr-3 rounded"></span>
                    Daily Engine Targets
                </h2>
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-brand-bg rounded-xl p-5 border border-brand-primary/20 text-center relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-2 opacity-10 text-6xl font-black text-brand-primary group-hover:opacity-20 transition">‚ö°</div>
                        <div class="text-4xl lg:text-5xl font-black text-white">3986</div>
                        <div class="text-brand-primary font-bold mt-1">CALORIES</div>
                        <div class="text-xs text-gray-500 mt-2">Maintain Mass & Power</div>
                    </div>
                    <div class="bg-brand-bg rounded-xl p-5 border border-brand-secondary/20 text-center">
                        <div class="text-4xl lg:text-5xl font-black text-brand-secondary">557g</div>
                        <div class="text-gray-300 font-bold mt-1">CARBS</div>
                        <div class="text-xs text-gray-500 mt-2">Primary Fuel Source</div>
                    </div>
                    <div class="bg-brand-bg rounded-xl p-5 border border-brand-success/20 text-center">
                        <div class="text-4xl lg:text-5xl font-black text-brand-success">190g</div>
                        <div class="text-gray-300 font-bold mt-1">PROTEIN</div>
                        <div class="text-xs text-gray-500 mt-2">Repair & Growth</div>
                    </div>
                    <div class="bg-brand-bg rounded-xl p-5 border border-brand-accent/20 text-center">
                        <div class="text-4xl lg:text-5xl font-black text-brand-accent">111g</div>
                        <div class="text-gray-300 font-bold mt-1">FATS</div>
                        <div class="text-xs text-gray-500 mt-2">Hormonal Health</div>
                    </div>
                </div>
            </section>

            <!-- Intensity Wave -->
            <section class="bg-brand-card rounded-2xl shadow-lg p-6 lg:p-8 border border-gray-700 flex flex-col">
                <h2 class="text-xl font-bold text-white mb-2">Weekly Intensity Wave</h2>
                <p class="text-sm text-gray-400 mb-6">Matching calorie/carb intake to physical output. Note the spikes on Wed (Match) and Fri (Intense).</p>
                <div class="chart-container-bar flex-grow">
                    <canvas id="weeklyIntensityChart"></canvas>
                </div>
            </section>

            <!-- 80/20 Rule Visualization -->
            <section class="bg-brand-card rounded-2xl shadow-lg p-6 lg:p-8 border border-gray-700">
                <h2 class="text-xl font-bold text-white mb-2">The 80/20 Food Rule</h2>
                <p class="text-sm text-gray-400 mb-6">How your ~4000 calories are composed.</p>
                <div class="chart-container">
                    <canvas id="ruleChart"></canvas>
                </div>
                <div class="mt-4 grid grid-cols-3 gap-2 text-center text-xs text-gray-400">
                    <div>
                        <span class="block w-3 h-3 bg-green-500 rounded-full mx-auto mb-1"></span>
                        Whole Foods
                    </div>
                    <div>
                        <span class="block w-3 h-3 bg-yellow-500 rounded-full mx-auto mb-1"></span>
                        Mixed/Starchy
                    </div>
                    <div>
                        <span class="block w-3 h-3 bg-pink-500 rounded-full mx-auto mb-1"></span>
                        "Junk"/Fuel
                    </div>
                </div>
            </section>

            <!-- Supplement Timing -->
            <section class="md:col-span-2 bg-brand-card rounded-2xl shadow-lg p-6 lg:p-8 border border-gray-700">
                <h2 class="text-2xl font-bold text-white mb-6">Supplement Protocols</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    
                    <!-- Creatine Card -->
                    <div class="bg-brand-bg p-5 rounded-xl border-l-4 border-blue-500">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-lg text-white">Creatine</h3>
                            <span class="bg-blue-500/20 text-blue-300 text-xs px-2 py-1 rounded">9g Daily</span>
                        </div>
                        <div class="mt-4 space-y-3">
                            <div class="flex items-center text-sm text-gray-300">
                                <span class="w-6 h-6 flex items-center justify-center bg-gray-700 rounded mr-3 text-xs">ON</span>
                                Split: 4.5g Pre-Train / 4.5g Post
                            </div>
                            <div class="flex items-center text-sm text-gray-300">
                                <span class="w-6 h-6 flex items-center justify-center bg-gray-700 rounded mr-3 text-xs">OFF</span>
                                Single Dose: 9g with Breakfast
                            </div>
                        </div>
                    </div>

                    <!-- Omega 3 Card -->
                    <div class="bg-brand-bg p-5 rounded-xl border-l-4 border-yellow-500">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-lg text-white">Omega 3</h3>
                            <span class="bg-yellow-500/20 text-yellow-300 text-xs px-2 py-1 rounded">2-3g Daily</span>
                        </div>
                        <div class="mt-4 text-sm text-gray-300">
                            <p class="mb-2"><strong>Timing:</strong> Take with last meal (Meal 6) or Dinner.</p>
                            <p class="text-xs text-gray-500">Reduces inflammation while sleeping.</p>
                        </div>
                    </div>

                    <!-- Electrolytes Card -->
                    <div class="bg-brand-bg p-5 rounded-xl border-l-4 border-purple-500">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-lg text-white">Electrolytes</h3>
                            <span class="bg-purple-500/20 text-purple-300 text-xs px-2 py-1 rounded">Training</span>
                        </div>
                        <div class="mt-4 text-sm text-gray-300">
                            <p class="mb-2"><strong>Mandatory Days:</strong></p>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-700 px-2 py-1 rounded text-xs">Mon (Rugby)</span>
                                <span class="bg-gray-700 px-2 py-1 rounded text-xs">Wed (Match)</span>
                                <span class="bg-gray-700 px-2 py-1 rounded text-xs">Fri (Intense)</span>
                                <span class="bg-gray-700 px-2 py-1 rounded text-xs">Sun (Run)</span>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

        </main>

        <footer class="mt-10 text-center text-gray-500 text-sm">
            Generated for Myles ‚Ä¢ 2025 Plan ‚Ä¢ Self-Contained Logic
        </footer>

    </div>

    <!-- Offline Logic Script -->
    <script>
        const outputDiv = document.getElementById('aiOutput');

        // --- DATA LIBRARIES ---
        
        const swaps = {
            'chicken': "Swap **Chicken** for: \n\n* **Turkey Breast** (Almost identical macros)\n* **Lean Beef Mince (5%)** (Higher Iron/Creatine)\n* **White Fish/Cod** (Lighter, digests faster)",
            'beef': "Swap **Beef** for: \n\n* **Chicken Thighs** (Similar fat content)\n* **Salmon** (Higher Omega 3, great for inflammation)\n* **Venison** (Very lean game meat)",
            'rice': "Swap **Rice** for: \n\n* **Pasta** (Calorically dense, great for bulking)\n* **Potatoes** (High satiety, need roughly 4x weight of rice)\n* **Bagels** (Fast digesting carbs)",
            'oats': "Swap **Oats** for: \n\n* **Cream of Rice** (Easier digestion pre-training)\n* **Weetabix/Cornflakes** (Faster carbs)\n* **Granola** (Higher calorie density)",
            'egg': "Swap **Eggs** for: \n\n* **Greek Yogurt** (High casein/protein)\n* **Whey Protein Shake** (Convenience)\n* **Tofu Scramble** (Plant based option)",
            'salmon': "Swap **Salmon** for: \n\n* **Mackerel** (Similar healthy fats)\n* **Steak** (Fatty cut like Ribeye)\n* **Avocado + Chicken** (Matches the protein + fat combo)"
        };

        const hypeQuotes = [
            "Pain is temporary. Victory is forever. Go smash it.",
            "You didn't eat 557g of carbs to play small. Dominate the contact area.",
            "Clear eyes, full hearts, can't lose.",
            "Your body is a machine. You've fuelled it. Now drive it.",
            "Every collision is a choice. Choose violence (legally).",
            "Wednesday is Payday. Go collect.",
            "Fatigue makes cowards of us all. You are fuelled to outlast them.",
            "Head in the fridge, heart in the fire.",
            "Be the player they hate playing against.",
            "80 minutes of work. A lifetime of glory. Let's go."
        ];

        // --- LOGIC FUNCTIONS ---

        function runOfflineSwap() {
            const input = document.getElementById('swapInput').value.toLowerCase();
            if (!input) {
                outputDiv.innerHTML = `<span class="text-yellow-500">Please enter a food to swap.</span>`;
                return;
            }

            // Simple keyword matching
            let found = false;
            for (const key in swaps) {
                if (input.includes(key)) {
                    outputDiv.innerHTML = marked.parse(swaps[key]);
                    found = true;
                    break;
                }
            }

            if (!found) {
                outputDiv.innerHTML = marked.parse(`I don't have a specific swap for "**${input}**" in my database yet.\n\n**General Rule:**\n* **Protein?** Swap for Chicken, Beef, Turkey, Fish, or Tofu.\n* **Carb?** Swap for Rice, Pasta, Potato, Oats, or Bread.\n* **Fat?** Swap for Avocado, Nuts, Olive Oil, or Cheese.`);
            }
        }

        function runOfflineHype() {
            const randomQuote = hypeQuotes[Math.floor(Math.random() * hypeQuotes.length)];
            outputDiv.innerHTML = marked.parse(`### üî• COACH SAYS:\n\n> "${randomQuote}"`);
        }

        function runOfflineRecipe() {
            const input = document.getElementById('recipeInput').value;
            if (!input) {
                outputDiv.innerHTML = `<span class="text-yellow-500">Please enter ingredients.</span>`;
                return;
            }

            // Mad-libs style generator
            const recipe = `### üç≥ Quick High-Calorie Builder
            
            Here is a way to use **${input}** to hit your calories:
            
            1.  **Prep:** Chop up your ${input} and any other veg you have.
            2.  **Base:** Cook a large portion (100g dry weight) of **Pasta** or **Rice**.
            3.  **Fat:** Fry everything in **1 tbsp Butter or Olive Oil** (adds ~120kcal).
            4.  **Protein:** Ensure you have at least 200g of meat/eggs in the mix.
            5.  **Finish:** Top with **Cheese** or a **Creamy Sauce** to boost calories easily.
            
            **Estimated Macros:** ~800-900 kcal | High Carb | High Protein`;

            outputDiv.innerHTML = marked.parse(recipe);
        }

        // --- CHART LOGIC (UNCHANGED) ---
        document.addEventListener('DOMContentLoaded', () => {
            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                  return label.join(' ');
                } else {
                  return label;
                }
            };

            Chart.defaults.font.family = 'Inter, sans-serif';
            Chart.defaults.color = '#94a3b8';

            // Weekly Intensity Chart
            const ctxIntensity = document.getElementById('weeklyIntensityChart');
            new Chart(ctxIntensity, {
                type: 'line',
                data: {
                    labels: ['Mon (Rugby)', 'Tue (Recov)', 'Wed (MATCH)', 'Thu (Recov)', 'Fri (INTENSE)', 'Sat (Gym)', 'Sun (Run)'],
                    datasets: [{
                        label: 'Training Load',
                        data: [7, 3, 9, 3, 10, 6, 5],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    },
                    {
                        label: 'Carb Intake Focus',
                        data: [7, 4, 10, 4, 10, 6, 6],
                        borderColor: '#f59e0b',
                        borderDash: [5, 5],
                        pointRadius: 0,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            display: false,
                            min: 0,
                            max: 12
                        },
                        x: {
                            grid: { color: '#334155' }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: { callbacks: { title: tooltipTitleCallback } }
                    }
                }
            });

            // 80/20 Rule Chart
            const ctxRule = document.getElementById('ruleChart');
            new Chart(ctxRule, {
                type: 'doughnut',
                data: {
                    labels: ['Whole Foods (Standard)', 'Mixed (Bread/Pasta)', 'Junk/Fuel (Sugar)'],
                    datasets: [{
                        data: [80, 10, 10],
                        backgroundColor: ['#10b981', '#eab308', '#ec4899'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%',
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { title: tooltipTitleCallback } }
                    }
                }
            });
        });
    </script>
</body>
</html>
